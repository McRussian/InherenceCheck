

## <a name='parser_seqency'></a>Парсер секвенции

На ввод парсера подается строка с записанной секвенцией. 
Задачи парсера следующие:

1. Проверить, что секвенция записана правильно
2. Преобразовать секвенцию в шаблон секвенции

Обе задачи описаны ниже.

### <a name='parser_check_sequency'></a>Проверка правильности секвенции

На вход подается секвенция, например "G1, A, B, G2 |- C"
Задача парсера разобрать данное выражение и определить, является ли эта запись правильной.
Для решения этой задачи будет использоваться формальная грамматика. Правила грамматики приведены ниже.

Парсер возвращает цепочку вывода (набор правил грамматики), при помощи которой можно построить 
данную секвенцию. Если такой цепочки не нашлось (секвенция записана неправильно), то возвращается 
ошибка парсера (исключение).

### <a name='parser_grammatic_sequency'></a>Формальная грамматика для вывода секвенции

Формальная грамматика состоит из нескольких множеств:

1. Множества терминальных элементов - это те лексемы, которые встречаются при записи секвенции.
2. Множество нетерминальных элементов - набор понятий, которые помогают построить секвенцию.
3. Множества правил вывода.
4. Стартовое правило, с которого начинается весь вывод.

Множество нетерминальных элементов будет одним и тем-же, а вот множество терминальных элементов 
может меняться, в зависимости от того, какие имена формул, переменных и т.п. ввел пользователь.
Поэтому, при создании парсера нужно будет указывать ему эти множества.

Наша грамматика является контекстно-свободной. При записи правил вывода будут использоваться следующие моменты:

1. В левой части правила записан единственный нетерминальный элемент. 
2. Все нетерминальные элементы записаны в верхнем регистре.
3. Разделителем между левой частью и правой является строка '->'.
4. Правая часть представляет собой последовательность из нетерминальных и терминальных элементов.
   Все элементы последовательности разделены пробелом.
5. Нетерминальному элементу в левой части может соответствовать несколько разных цепочек,
   в этом случае допустимо их писать через символ '|'.
6. Все терминальные элементы должны быть записаны в кавычках. 

Для секвенций разработана следующая грамматика:

S -> SEQUENCY FOLLOW SEQUENCY
FOLLOW -> '->'
SEQUENCY -> '' | NAME_FORMULA SEQUENCY | SEQUENCY NAME_FORMULA | NAME_SEQUENCY SEQUENCY | SEQUENCE NAME_SEQUENCY
NAME_SEQUENCY -> 'G' | 'D'
NAME_FUNCTION -> 'A' | 'B' | 'C' 

Важно, наша грамматика не предусматривает использование символа ',' в записи секвенции,
поэтому любая секвенция должна быть предварительно обработана, разбита на лексемы.


### <a name='parser_pattern_seqency'></a>Преобразование секвенции в шаблон 

Если секвенция записана правильно, то мы можем преобразовать запись секвенции в шаблон.
Шаблон необходим для того, чтобы мы могли сравнивать секвенции между собой.
Например, у нас есть две секвенции, записанные с помощью разных символов
"G1, A, B, G2 |- C" и "G, F, Y, D |- V"
Секвенции отличаются только именами используемых переменных. 
Обе секвенции могут быть описаны с помощью шаблона "G, {F1}, {F2}, D |- {F3}"
Этот шаблон обозначает, что сначала идет цепочка форму (возможно пустая), 
потом две формулы (которые исходно могут иметь разные имена), потом снова цепочка формул (возможно пустая),
в правой части записана одна формула.
Все секвенции, у которых шаблоны совпадают, будем считать одинаковыми.

Для построения шаблона секвенции, будет использоваться цепочка вывода из проверки правильности секвенции.
В этой цепочке будут заменены правила, которые ведут к литералам типа перменных и имен функций, 
вместо них будут использовать правила, которые строят шаблоны для этих типов лексем.
Тем самым мы можем любую правильную секвенцию преобразовать в шаблон.
